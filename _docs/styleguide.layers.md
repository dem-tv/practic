# Технические слои приложения

Структура проекта основана на разделении по техническим слоям:
представления, компоненты и api и прочее.

> Слои имеют однонаправленный поток использования, запрещено импортировать файлы из слоев, находящихся на более высоком уровне.
> ---

Слои не совпадают с файловой структурой проекта один к одному, поскольку в зависимостях, включая фреймворк, могут находиться функции и свойства, которые можно отнести к тем или иным слоям.
Так же стоит обратить внимание, что порой названия могут сбивать с толку: `useRoute` и `useRouter` относятся к слою `composables`, а не `router`.

__Внимание:__ в проекте настроен [автоматический импорт](auto-imports.md), но он не учитывает разделение по техническим слоям, за этим необходимо следить самостоятельно и не использовать функции и свойства из более низких слоёв, а так же избегать круговых (циклических) импортов.

## ↓ `router`

Модули настройки рутов приложения ограничиваются импортом представлений.

В некоторых случаях допускается импорт наиболее простых утилит, констант и типов, но лучше этого избежать.

## ↓ `views`

Представления (страницы) могут импортировать код из модулей всех нижележащих слоёв, использовать глобальные состояния (`api`, `stores`, руты сайта и другие).

## ↓ `components`

Умные компоненты (уникальные компоненты с префиксом `The`) могут импортировать всё, кроме представлений, могут использовать глобальные состояния.

Глупые компоненты не должны содержать импортов представлений, умных компонентов, и не должны использовать глобальные состояния.

## ↓ `composables`

Композиционные функции могут импортировать код из модулей того же слоя, а так же из более низких слоёв.

Если композиционная функция содержит импорты `api`, `stores` или управляет рутами, то её могут импортировать только представления и умные компоненты.

## ↓ `directives`

Директивы могут импортировать код только из более низких слоёв.
Не должны импортировать другие директивы.

Если директива содержит импорты `api` или `stores` или управляет рутами, то её могут импортировать только представления и умные компоненты, либо *composables*, которые используются только в представлениях и умных компонентах.

## ↓`api`

Модули`api` могут импортировать код из более низких слоёв, кроме `stores`.

Импорт из модулей того же слоя допустим в некоторых случаях, но нежелателен.

## ↓ `stores`

Модули хранилища могут импортировать код из более низких слоёв.

Импорт из модулей того же слоя допустим в некоторых случаях.

## ↓ `utils`

Функции-утилиты могут импортировать другие утилиты, константы и типы.

## ↓ `constants`

Константы могут импортировать только другие константы и типы.

## ↓ `types`

Модули TypeScript-типов могут импортировать только другие типы.
